<!DOCTYPE html>
<html>
<head>
	<title>Bees and plants</title>
	<link href="https://fonts.googleapis.com/css2?family=Sen:wght@400;700;800&display=swap" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,500;0,600;1,400&display=swap" rel="stylesheet">
	<script src="https://d3js.org/d3.v5.min.js"></script>
	<script src="https://unpkg.com/intersection-observer"></script>
	<script src="https://unpkg.com/scrollama"></script>

	<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=DM+Sans&display=swap" rel="stylesheet">

	<link rel="stylesheet" href="general.css">

</head>

<body>

<!-- nav -->
<nav>
	<h3>The relationship of bees to plants</h3>
</nav>

<!-- text -->
<div class='header title step'>
	<div class='aligner'>
		<h1>What does the bee to plant relationship look like?</h1>
		<h2>Associations Between Blooming Plants and Their Bee Visitors in a Riparian Ecosystem in Eastern Oregon</h2>
	</div>
</div>


<div class='text'>
	<h2>Alison Harford</h2>	
	How do bees choose which plants they visit? This is the question I wanted to explore when I discovered the dataset, "Associations Between Blooming Plants and Their Bee Visitors in a Riparian Ecosystem in Eastern Oregon," created by researchers at Oregon State University. The data tracked how many bees, and which species of bee, were found on blooming plants in a riparian area across 12 different sites in 2014 and 2014. 

	<a href="https://docs.google.com/spreadsheets/d/1JLHDcEbCawTfjcfpBnUURUFuwEgZR34ybAPzvWqX_M8/edit?usp=sharing" target="new"> Click here</a> to look at the many ways I organized the dataset in Google Sheets.
</div>

<div class='text'>
	<h1>How was the data collected?</h1>
	Researchers tracked the number of blooming stems counted for each plant species on transects, the total number of bees caught on each plant species, and the total number of bee species collected on each plant species. In the chart below, you can explore which plants had the greatest number of bee visitors—and what species of bee those visitors were. 
</div>

<!-- dashboard 1 -->
<div class='center_aligner'>
<div class='tableauPlaceholder' id='viz1671059830847' style='position: relative'><noscript><a href='#'><img alt='Dashboard 2 ' src='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Be&#47;Beeabundancerichness&#47;Dashboard2&#47;1_rss.png' style='border: none' /></a></noscript><object class='tableauViz'  style='display:none;'><param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' /> <param name='embed_code_version' value='3' /> <param name='site_root' value='' /><param name='name' value='Beeabundancerichness&#47;Dashboard2' /><param name='tabs' value='no' /><param name='toolbar' value='yes' /><param name='static_image' value='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Be&#47;Beeabundancerichness&#47;Dashboard2&#47;1.png' /> <param name='animate_transition' value='yes' /><param name='display_static_image' value='yes' /><param name='display_spinner' value='yes' /><param name='display_overlay' value='yes' /><param name='display_count' value='yes' /><param name='language' value='en-US' /><param name='filter' value='publish=yes' /></object></div>                <script type='text/javascript'>                    var divElement = document.getElementById('viz1671059830847');                    var vizElement = divElement.getElementsByTagName('object')[0];                    if ( divElement.offsetWidth > 800 ) { vizElement.style.width='1000px';vizElement.style.height='827px';} else if ( divElement.offsetWidth > 500 ) { vizElement.style.width='1000px';vizElement.style.height='827px';} else { vizElement.style.width='100%';vizElement.style.height='727px';}                     var scriptElement = document.createElement('script');                    scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js';                    vizElement.parentNode.insertBefore(scriptElement, vizElement);                </script>
</div>



<div class='text'>
	<h1>Putting it together</h1>
	So now we have an idea of which plant species were the most popular both in total bee visitation, but also in bee "richness," meaning, which plants weren't pollinated by only a few types of bees. 
</div>

<!-- dashboard 2 -->
<div class='center_aligner'>
	<!-- insert tableau public embed link below this line -->
	<div class='tableauPlaceholder' id='viz1671059034934' style='position: relative'><noscript><a href='#'><img alt='Which bees visited which plants? ' src='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Wh&#47;Whichbeesvisitedwhichplants&#47;Whichbeesvisitedwhichplants&#47;1_rss.png' style='border: none' /></a></noscript><object class='tableauViz'  style='display:none;'><param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' /> <param name='embed_code_version' value='3' /> <param name='site_root' value='' /><param name='name' value='Whichbeesvisitedwhichplants&#47;Whichbeesvisitedwhichplants' /><param name='tabs' value='no' /><param name='toolbar' value='yes' /><param name='static_image' value='https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Wh&#47;Whichbeesvisitedwhichplants&#47;Whichbeesvisitedwhichplants&#47;1.png' /> <param name='animate_transition' value='yes' /><param name='display_static_image' value='yes' /><param name='display_spinner' value='yes' /><param name='display_overlay' value='yes' /><param name='display_count' value='yes' /><param name='language' value='en-US' /><param name='filter' value='publish=yes' /></object></div>                <script type='text/javascript'>                    var divElement = document.getElementById('viz1671059034934');                    var vizElement = divElement.getElementsByTagName('object')[0];                    vizElement.style.width='100%';vizElement.style.height=(divElement.offsetWidth*0.75)+'px';                    var scriptElement = document.createElement('script');                    scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js';                    vizElement.parentNode.insertBefore(scriptElement, vizElement);                </script>
</div>

<div class='text'>
	<h1>How can we pick out the bee to plant relationships?</h1>
	In exploring the bar chart, a few things become glaringly obvious: first, that some bees—like bumblebees—really flitted around, while others—like panurginus–were extremely specialized. Second, some plants were much more popular than others: the missouri goldenrod saw far and away the most bees of any plant in the study. To explore this, I grouped the bee species into genus, and picked out some of the most popular plants to create a Sankey diagram. Explore the diagram by hovering. 
</div>

<!-- interactive embed, adjust the width and height as necessary, copy lines 155 to 157 to create a new interactive embed --> 
<div class='center_aligner'>
	<iframe src="interactive.html" frameBorder=0 scrolling=no></iframe>
</div>


</body>
<script type="text/javascript">

// instantiate the scrollama
const scroller = scrollama();
const scroller2 = scrollama();

scroller
  .setup({
    step: ".text",
    offset: 0.9,
  })
  .onStepEnter(response => {
    // { element, index, direction }
    el=response.element;
    el.style.opacity=1;
    el.style.marginTop='5%';    
  })
  .onStepExit(response => {
    // { element, index, direction }  
    el=response.element;
  })
  ;
 // setup resize event
window.addEventListener("resize", scroller.resize);

scroller2
  .setup({
    step: ".progressive",
    offset: 0.6,
  })
  .onStepEnter(response => {
    // { element, index, direction }
    el=response.element;
    el.style.opacity=1;
    if(response.index==0 || 1 || 2){
    	stick('dynamic_sticky1')
    	response.direction=='down'
    	if(response.index==0){
    		count(1,16,1,'Energy','after a 15 minute break','dynamic_sticky1')
    	} else if (response.index==1){
    		count(1,3.8,.1,'Engagement','average','dynamic_sticky1')
    	} else if (response.index==2){
    		count(0,0.9,.1,'Mood','increase','dynamic_sticky1')
    	}
    }
  })
  .onStepExit(response => {
    // { element, index, direction }  
    el=response.element;
    console.log(response.index)
    if(response.index==2){
    	unstick('dynamic_sticky1')
    }
    el.style.opacity=0;
  })
  ;
 // setup resize event
window.addEventListener("resize", scroller2.resize);

function count(number1, number2, step, title, label, location_id, prefix='+', suffix='%'){
	target = document.querySelector('#'+location_id)
	console.log(target)
	let text=number1;

	setInterval(function(){
		if(text!=number2){
			num = text+step
			if(num % 1 == 0){
				text = num
			} else {
				text = parseFloat(num.toFixed(2))
			}
			target.innerHTML="<div class='aligner'><h1>"+title+"</h1><div id='counter'>"+prefix+text+suffix+"</div><h2>"+label+"</h2></div>"
		}
	}, 30);
}

function stick(location_id){
	target = document.querySelector('#'+location_id)
	target.style.position="sticky"
}

function unstick(location_id){
	target = document.querySelector('#'+location_id)
	target.style.position="relative"
}

</script>

</html>
